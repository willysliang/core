/**
 * @ Author: willy
 * @ Create Time: 2023-11-01 15:10:14
 * @ Modifier by: willy
 * @ Modifier time: 2023-11-03 11:16:41
 * @ Description: 通用样式
 */

/** px 转换 rem */
@function p2r($item) {
  @return calc($item / 75) * 5 * 1rem;
}

/** 宽高 */
@mixin wh($width, $height) {
  width: p2r($width);
  height: p2r($height);
}

// background: #fff url("image.jpg") no-repeat right top fixed;
@mixin wh-bg(
  $width,
  $height,
  $url: '',
  $bgcolor: transparent,
  $size: 100% 100%,
  $position: center center,
  $repeat: no-repeat,
  $attachment: scroll
) {
  @include wh($width, $height);
  background-image: url($url);
  background-repeat: no-repeat;
  background-size: $size;
  background-position: $position;
  background-repeat: $repeat;
  background-color: $bgcolor;
  background-attachment: $attachment;
}

%flex {
  display: flex;
  align-items: center;
  justify-content: center;
}

%fullScreen {
  position: fixed;
  left: 0px;
  top: 0px;
  right: 0px;
  bottom: 0px;
  z-index: 9999;
}

/* 溢出省略号 @param {Number} 行数 */
@mixin text-ell($rowCount: 1) {
  @if $rowCount <=1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: $rowCount;
    -webkit-box-orient: vertical;
  }
}

/** 滚动条 */
@mixin scrollbar($color: #a356ff) {
  -webkit-overflow-scrolling: touch;

  /* Firefox隐藏滚动条 */
  scrollbar-width: none;
  -ms-overflow-style: none;

  /*定义滚动条样式（高宽及背景）*/
  &::-webkit-scrollbar {
    /* 滚动条宽度， width：对应竖滚动条的宽度  height：对应横滚动条的高度*/
    width: p2r(2);
    background-color: transparent;
  }

  /*定义滚动条轨道（凹槽）样式*/
  ::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 p2r(6) transparent; /* 较少使用 */
    border-radius: p2r(4);
  }

  /*定义滑块 样式*/
  &::-webkit-scrollbar-thumb {
    width: p2r(10);
    background-color: $color;
    border-radius: p2r(10);
  }
}

/**
 * 通用四状态按钮
 * @param {'img' | 'brightness' | ''} $type 按钮类型： ''：默认、img:图片、brightness：高亮
 * @param {number} $width 按钮宽度
 * @param {number} $heigth 按钮高度
 * @param {string} $urlNormal 默认显示图片，仅限 $type='img' 时发挥作用
 * @param {string} $urlHover 鼠标悬浮时显示图片，仅限 $type='img' 时发挥作用
 * @param {string} $urlPress 激活时显示图片，仅限 $type='img' 时发挥作用
 * @param {string} $urlDis 禁用时显示图片，仅限 $type='img' 时发挥作用
 */
@mixin btn(
  $type: '',
  $width: 0,
  $height: 0,
  $urlNormal: '',
  $urlHover: '',
  $urlPress: '',
  $urlDis: ''
) {
  transition: all 0.3s;
  cursor: pointer;

  @if ($type == 'img') {
    @include wh-bg($width, $height, $urlNormal);
  }

  &:hover {
    @if $type == 'brightness' {
      filter: brightness(1.2);
    } @else if ($type == 'img' and $urlHover != '') {
      @include wh-bg($width, $height, $urlHover);
    } @else {
      opacity: 0.8;
    }
  }

  &:active {
    @if $type == 'brightness' {
      filter: brightness(0.8);
    } @else if ($type == 'img' and $urlPress != '') {
      @include wh-bg($width, $height, $urlPress);
    } @else {
      opacity: 0.6;
    }
  }

  &.disabled {
    @if $type == 'brightness' {
      filter: brightness(0.6);
    } @else if ($type == 'img' and $urlDis != '') {
      @include wh-bg($width, $height, $urlDis);
    } @else {
      opacity: 0.4;
    }
    cursor: not-allowed;
  }
}
